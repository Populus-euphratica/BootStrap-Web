<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="https://static.pingendo.com/bootstrap/bootstrap-4.3.1.css">
  <script src="../jquery/jquery-3.4.1.min.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container justify-content-center"> <button class="navbar-toggler navbar-toggler-right border-0" type="button" data-toggle="collapse" data-target="#navbar9">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse text-center justify-content-center" id="navbar9">
        <ul class="navbar-nav">
          <li class="nav-item mx-2"> <a class="nav-link" href="#">Products</a> </li>
          <li class="nav-item mx-2"> <a class="nav-link" href="#">FAQ</a> </li>
          <li class="nav-item mx-2"> <a class="nav-link navbar-brand mr-0 text-white" href="#"><i class="fa d-inline fa-lg fa-stop-circle-o"></i>
              <b> BRAND</b></a> </li>
          <li class="nav-item mx-2"> <a class="nav-link" href="#">About us</a> </li>
          <li class="nav-item mx-2"> <a class="nav-link" href="#">Contacts </a> </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="py-5 text-center" style="	background-image: url(image/image4.jpg);	background-position: right bottom;	background-size: cover;	background-repeat: repeat;	background-attachment: fixed;">
    <div class="container">
      <div class="row justify-content-center align-items-center" style="">
        <div class="bg-white p-4 col-10 mx-auto mx-md-0 col-lg-6">
          <h1>API查找</h1>
          <form class="form-inline d-flex justify-content-center">
            <div class="input-group"> <input type="text" class="form-control" placeholder="please input" id="searchContent">
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-expanded="false"></button>
              <button class="btn btn-primary" type="button" contenteditable="true" id="search">Search</button>
              <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 38px, 0px);">
                <a class="dropdown-item" href="#">name</a>
                <a class="dropdown-item" href="#">company</a>
                <a class="dropdown-item" href="#">email</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">全部匹配</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="py-5" style="">
    <div class="container">
      <div class="row">
        <div class="col-3">
          <ul class="nav nav-pills flex-column">
            <li class="nav-item"> <a href="" class="nav-link active" data-toggle="pill" data-target="#tabone">编辑API</a> </li>
            <li class="nav-item"><a class="nav-link" href="#" data-target="#tabone" data-toggle="pill">删除API</a></li>
            <li class="nav-item" style=""> <a class="nav-link" href="" data-toggle="pill" data-target="#tabtwo">添加API</a> </li>
          </ul>
        </div>
        <div class="col-9">
          <div class="tab-content">
            <div class="tab-pane fade active show" id="tabone" role="tabpanel">
              <div class="table-responsive">
                <table class="table table-bordered ">
                  <thead class="thead-dark">
                    <tr>
                      <th style="">#</th>
                      <th>API Name</th>
                      <th>Description</th>
                      <th>Category</th>
                      <th>Versions</th>
                    </tr>
                  </thead>
                  <tbody id="api">
                  </tbody>
                </table>
              </div>
              <ul class="pagination justify-content-center" id="footer">
              </ul>
            </div>
            <div class="tab-pane fade" id="tabtwo" role="tabpanel">
              <div class="mx-auto p-4 col-md-7">
                <h1 class="mb-4 text-center">添加API</h1>
                <form>
                  <div class="form-group"> <input type="text" class="form-control" id="form33" placeholder="API Name" required="required"> </div>
                  <div class="form-row">
                    <div class="form-group col-md-6"> <input type="text" class="form-control" id="form27" placeholder="Versions"> </div>
                    <div class="form-group col-md-6"> <input type="text" class="form-control" id="form28" placeholder="Category"> </div>
                  </div>
                  <div class="form-group"> <textarea class="form-control" id="form35" rows="3" placeholder="Description"></textarea> </div> <button type="submit" class="btn btn-outline-primary btn-block">Add</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <pingendo onclick="window.open('https://pingendo.com/', '_blank')" style="cursor:pointer;position: fixed;bottom: 20px;right:20px;padding:4px;background-color: #00b0eb;border-radius: 8px; width:220px;display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:14px;color:white">Made with Pingendo Free&nbsp;&nbsp;<img src="https://pingendo.com/site-assets/Pingendo_logo_big.png" class="d-block" alt="Pingendo logo" height="16"></pingendo>
  </div>
  <div class="py-3">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center d-md-flex align-items-center"> <i class="d-block fa fa-stop-circle fa-2x mr-md-5 text-primary"></i>
          <ul class="nav mx-md-auto d-flex justify-content-center">
            <li class="nav-item"> <a class="nav-link active" href="#">Home</a> </li>
            <li class="nav-item"> <a class="nav-link" href="#">Features</a> </li>
            <li class="nav-item"> <a class="nav-link" href="#">Pricing</a> </li>
            <li class="nav-item"> <a class="nav-link" href="#">About</a> </li>
          </ul>
          <div class="row">
            <div class="col-md-12 d-flex align-items-center justify-content-md-between justify-content-center my-2"> <a href="#">
                <i class="d-block fa fa-facebook-official text-muted fa-lg mx-2"></i>
              </a> <a href="#">
                <i class="d-block fa fa-instagram text-muted fa-lg mx-2"></i>
              </a> <a href="#">
                <i class="d-block fa fa-twitter text-muted fa-lg ml-2"></i>
              </a> </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <p class="mt-2 mb-0">© 2014-2018 Pingendo. All rights reserved</p>
        </div>
      </div>
    </div>
  </div>
  <script>
    var pageNum = 1;
    var searchUrl = "";
    var searchType = "";
    $(function search(){
      $("#search").click(function() {
      if ($("#searchContent").val() == "") {
        searchUrl = "http://localhost:8080/api/api/";
        searchType = "get";
        $.ajax({
          url: searchUrl,
          type: searchType,
          data: {
            "pageNum": pageNum
          },
          success: function(data) {
            tableContent(data.list);
            footerContent(data.pageNum, data.hasPreviousPage, data.hasNextPage, data.navigatepageNums);
            footerEnterAPIAll();
          },
          error: function() {
            $("#api").empty();
            alert("error!!!");
          }
        })
      }
    });
    })

    function footerContent(pageNum, hasPreviousPage, hasNextPage, navigatepageNums) {
      var content = "";
      if (!hasPreviousPage) {
        $.each(navigatepageNums, function(i, val) {
          if (i == 0) {
            content += "<li class='page-item active'> <a class='page-link' href='#' data-pagenum=" + val + ">" + val + "</a></li>"
          } else if (i <= 3) {
            content += "<li class='page-item'> <a class='page-link' href='#' data-pagenum=" + val + ">" + val + "</a></li>"
          } else {
            content += "<li class='page-item'> <a class='page-link' href='#'  data-pagenum=" + val + ">" + "Next" + "</a></li>"
          }
        })
      } else if (!hasNextPage) {
        $.each(navigatepageNums, function(i, val) {
          if (i == 0) {
            content += "<li class='page-item'> <a class='page-link' href='#' data-pagenum=" + val + ">" + "Prev" + "</a></li>"
          } else if (i <= 3) {
            content += "<li class='page-item'> <a class='page-link' href='#' data-pagenum=" + val + ">" + val + "</a></li>"
          } else {
            content += "<li class='page-item active'> <a class='page-link' href='#' data-pagenum=" + val + ">" + val + "</a></li>"
          }
        })
      } else {
        $.each(navigatepageNums, function(i, val) {
          if (i == 0) {
            content += "<li class='page-item'> <a class='page-link'  href='#' data-pagenum=" + val + ">" + "Prev" + "</a></li>"
          } else if (i < 4) {
            if (val != pageNum) {
              content += "<li class='page-item' > <a class='page-link'  href='#' data-pagenum=" + val + ">" + val + "</a></li>"
            } else {
              content += "<li class='page-item active'> <a class='page-link' href='#' data-pagenum=" + val + ">" + val + "</a>								</li>"
            }
          } else {
            content += "<li class='page-item'> <a class='page-link'  href='#' data-pagenum=" + val + ">" + "Next" + "</a></li>"
          }
        })
      }
      $("#footer").html(content)
    }

    function footerEnterAPIAll() {
      $("#footer").click(function(event) {
        var pageNum = $(event.target).data("pagenum");
        $.ajax({
          url:searchUrl,
          type:searchType,
          data:{
            "pageNum":pageNum
          },
          success: function(data) {
            tableContent(data.list);
            footerContent(data.pageNum, data.hasPreviousPage, data.hasNextPage, data.navigatepageNums);
            footerEnterAPIAll();
          },
          error: function() {
            $("#api").empty();
            alert("error!!!");
          }
        })
      })
    }

    function tableContent(list) {
      var content = "";
      $.each(list, function(i, val) {
        content += "<tr><th><div><input type='checkbox'></div></th><td>" + list[i].name + "</td><td>" + list[i].descriptionBrief + "</td><td>" + list[i].category + "</td><td>" + list[i].versions + "</td></tr>";
      })
      $("#api").html(content);
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous" style=""></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>

</html>